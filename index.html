<!doctype html>
<html lang="tr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Oppo Swap</title>
    <link rel="stylesheet" href="./styles.css" />
    <script src="https://plugin.jup.ag/plugin-v1.js"></script>
  </head>
  <body>
    <div class="wrap">
      <div class="container">
        <!-- Widget -->
        <div class="widget-shell">
          <div id="target-container"></div>
        </div>

        <!-- Widgetin parçası gibi görünen alt bölüm (min 3cm) -->
        <div class="widget-appendix">
          <nav id="token-links" class="token-links" aria-label="Hızlı bağlantılar">
            <!-- Üst satır -->
            <a class="chip" href="https://x.com/OppoKiss_Me" target="_blank" rel="noopener">Oppo kiss me</a>
            <a class="chip" href="https://dexscreener.com/solana/HEadEtLjAFBGqAweLESUR2Qcjoc3U8ekQNvSUSH17gJz" target="_blank" rel="noopener">Dexscreener</a>
            <a class="chip" href="https://www.dexview.com/solana/HEadEtLjAFBGqAweLESUR2Qcjoc3U8ekQNvSUSH17gJz" target="_blank" rel="noopener">Dexview</a>
            <!-- Alt satır: CA ortalı ve tam satır -->
            <button class="chip ca" type="button" data-ca="HEadEtLjAFBGqAweLESUR2Qcjoc3U8ekQNvSUSH17gJz" title="CA adresini kopyala">
              CA: HEadEtLjAFBGqAweLESUR2Qcjoc3U8ekQNvSUSH17gJz
            </button>
          </nav>
        </div>
      </div>
    </div>

    <script>
      // Jupiter init
      window.addEventListener("load", function () {
        if (!window.Jupiter || typeof window.Jupiter.init !== "function") return;

        window.Jupiter.init({
          displayMode: "integrated",
          integratedTargetId: "target-container",
          defaultExplorer: "Solscan",
          formProps: {
            initialInputMint: "So11111111111111111111111111111111111111112", // SOL
            initialOutputMint: "HEadEtLjAFBGqAweLESUR2Qcjoc3U8ekQNvSUSH17gJz", // OPPO
            referralAccount: "9EvV3V9cZ4KktQ4xCnu3ymA2a9qgaBR4HLFhFddZZXSn",
            referralFee: 100, // bps (1.00%)
          },
          branding: {
            logoUri:
              "https://photos.pinksale.finance/file/pinksale-logo-upload/1733923962272-6c08b5b4359a38ef4991bd3d69dc1c3d.png",
            name: "Oppo",
          },
        });

        // CA kopyalama
        const bar = document.getElementById("token-links");
        const caBtn = bar?.querySelector(".chip.ca");
        if (caBtn) {
          const ca = caBtn.getAttribute("data-ca") || "";
          caBtn.addEventListener("click", async () => {
            try {
              await navigator.clipboard.writeText(ca);
              const prev = caBtn.textContent;
              caBtn.classList.add("copied");
              caBtn.textContent = "Copied!";
              setTimeout(() => {
                caBtn.textContent = prev || `CA: ${ca}`;
                caBtn.classList.remove("copied");
              }, 1200);
            } catch {
              // sessiz geç
            }
          });
        }
      });
    </script>
  </body>
</html>
